# Эмулятор UNIX-подобной оболочки с виртуальной файловой системой (VFS)

Данный проект представляет собой пошаговую реализацию эмулятора командной оболочки, имитирующего поведение UNIX-подобных систем). Эмулятор работает полностью в памяти, использует виртуальную файловую систему (VFS), загружаемую из CSV-файла, и поддерживает выполнение команд как в интерактивном режиме, так и из стартового скрипта.

Реализация выполнена в соответствии с пятью последовательными этапами.

---

## Этап 1: REPL

Реализован минимальный интерактивный цикл:
- Приглашение к вводу в формате `username@hostname:~$`.
- Парсинг команд с поддержкой кавычек (через `shlex.split`).
- Команды-заглушки: `ls`, `cd` — выводят своё имя и аргументы.
- Команда `exit` для завершения работы.
- Обработка ошибок: неизвестная команда → сообщение об ошибке.

> **Демонстрация**:  
> ```bash
> python program.py
> ```

---

## Этап 2: Конфигурация

Эмулятор стал настраиваемым через параметры командной строки:
- `--vfs-path` — путь к CSV-файлу с VFS (на этом этапе игнорируется, так как VFS ещё не подключена).
- `--script` — путь к текстовому файлу со списком команд.
- `--prompt` — кастомное приглашение к вводу.

При выполнении скрипта:
- Каждая команда выводится с приглашением (имитация ввода пользователя).
- Выполнение **останавливается при первой ошибке**.

> **Пример запуска**:  
> ```bash
> python program.py --script s1_script_1.txt"
> ```

---

## Этап 3: Виртуальная файловая система (VFS)

Добавлена поддержка VFS, загружаемой из CSV-файла:
- Формат CSV: `path,type,content`
  - `path` — абсолютный путь в стиле UNIX (например, `/home/user`).
  - `type` — `dir` или `file`.
  - `content` — содержимое файла в формате **base64** (для бинарной безопасности).
- Все операции выполняются **в памяти**; исходный CSV не изменяется.
- Поддержка вложенных структур до 3+ уровней.
- Обработка ошибок: файл не найден, неверный формат CSV, отсутствие корня `/`.

> **Тестовые наборы**:
> - Минимальная VFS (`s3_vfs_minimal.csv`)
> - Несколько файлов (`s3_vfs_files.csv`)
> - Глубокая структура (`s3_vfs_deep.csv`)

---

## Этап 4: Основные команды

Реализована полноценная логика для навигации и просмотра:
- `ls` — список содержимого текущей или указанной директории.
- `cd` — смена текущей директории с проверкой существования и типа.
- `cat` — вывод содержимого файла (декодирование из base64 → UTF-8).
- `date` — вывод текущей даты и времени в формате, близком к системному.

> **Пример**:  
> ```bash
> python program.py --vfs-path s4_vfs.csv --script s4_script.txt
> ```

---

## Этап 5: Дополнительные команды

Добавлена команда для изменения состояния VFS:
- `touch <путь>` — создаёт **пустой файл** в указанном месте, если:
  - Родительская директория существует.
  - Файл ещё не создан.
- Модификации происходят **только в памяти** — исходный CSV остаётся неизменным.
- Повторный вызов `touch` для существующего файла — игнорируется (без ошибки).

> **Тестирование**:  
> Скрипт `s5_script.txt` демонстрирует создание файлов, их отображение через `ls`, чтение через `cat` и обработку ошибок.

---

# Скриптовый режим (пример для этапа 5)
python program.py --vfs-path s5_vfs.csv --script s5_script.txt
